{% extends "base.html" %}
{% load static %}

{% block title %}Dashboard - KnowledgeHub{% endblock %}

{% block extra_css %}
<style>
    /* Additional dashboard-specific styles if needed */
    .recent-section {
        margin-top: 2rem;
    }
    
    .activity-card {
        transition: transform 0.2s;
    }
    
    .activity-card:hover {
        transform: translateX(5px);
    }
</style>
{% endblock %}

{% block content %}
<!-- Welcome Banner -->
<div class="welcome-banner">
    <h1>Welcome back, {{ request.user.username }}! ðŸ‘‹</h1>
    <p>Here's what's happening in your knowledge base today.</p>
</div>

<!-- Stats Section -->
<section class="stats-section">
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon" style="background: #e3f2fd;">
                <i class="fas fa-file-alt" style="color: #1976d2;"></i>
            </div>
            <div class="stat-details">
                <h2>{{ article_count|default:"1,234" }}</h2>
                <p>Total Articles</p>
                <span class="stat-trend positive">
                    <i class="fas fa-arrow-up"></i> 12% this week
                </span>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: #e8f5e9;">
                <i class="fas fa-users" style="color: #2e7d32;"></i>
            </div>
            <div class="stat-details">
                <h2>{{ team_count|default:"45" }}</h2>
                <p>Team Members</p>
                <span class="stat-trend positive">
                    <i class="fas fa-arrow-up"></i> 5 new
                </span>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: #fff3e0;">
                <i class="fas fa-clock" style="color: #ed6c02;"></i>
            </div>
            <div class="stat-details">
                <h2>{{ pending_count|default:"23" }}</h2>
                <p>Pending Approvals</p>
                <span class="stat-trend negative">
                    <i class="fas fa-arrow-down"></i> 3 from yesterday
                </span>
            </div>
        </div>
    </div>
</section>

<!-- Quick Actions -->
<div class="quick-actions">
    <button class="action-btn" onclick="window.location.href='{% url 'create_article' %}'">
        <i class="fas fa-plus"></i>
        New Article
    </button>
    <button class="action-btn" onclick="window.location.href='{% url 'create_workspace' %}'">
        <i class="fas fa-layer-group"></i>
        New Workspace
    </button>
</div>

<!-- Two Column Layout -->
<div class="dashboard-grid">
    <!-- Left Column - Recent Activity -->
    <div class="grid-left">
        <section class="recent-section">
            <div class="section-header">
                <h2><i class="fas fa-history"></i> Recent Activity</h2>
                <a href="#" class="view-all">View All <i class="fas fa-arrow-right"></i></a>
            </div>

            <div class="activity-list">
                <div class="activity-card">
                    <div class="activity-icon" style="background: #e3f2fd;">
                        <i class="fas fa-file-alt" style="color: #1976d2;"></i>
                    </div>
                    <div class="activity-details">
                        <p><strong>API Documentation</strong> updated 2 hours ago</p>
                        <span class="activity-meta">by John Doe</span>
                    </div>
                    <span class="activity-badge">Update</span>
                </div>

                <div class="activity-card">
                    <div class="activity-icon" style="background: #e8f5e9;">
                        <i class="fas fa-check-circle" style="color: #2e7d32;"></i>
                    </div>
                    <div class="activity-details">
                        <p><strong>Frontend Guidelines</strong> approved yesterday</p>
                        <span class="activity-meta">by Jane Smith</span>
                    </div>
                    <span class="activity-badge success">Approved</span>
                </div>

                <div class="activity-card">
                    <div class="activity-icon" style="background: #ffebee;">
                        <i class="fas fa-archive" style="color: #c62828;"></i>
                    </div>
                    <div class="activity-details">
                        <p><strong>Database Schema</strong> archived 3 days ago</p>
                        <span class="activity-meta">by Mike Johnson</span>
                    </div>
                    <span class="activity-badge archived">Archived</span>
                </div>
            </div>
        </section>
    </div>

    <!-- Right Column - Quick Links & Tasks -->
    <div class="grid-right">
        <!-- Pending Tasks -->
        <section class="tasks-section">
            <h2><i class="fas fa-tasks"></i> Your Tasks</h2>
            
            <div class="task-list">
                <div class="task-item">
                    <input type="checkbox" id="task1">
                    <label for="task1">Review 3 pending articles</label>
                </div>
                <div class="task-item">
                    <input type="checkbox" id="task2">
                    <label for="task2">Update React documentation</label>
                </div>
                <div class="task-item">
                    <input type="checkbox" id="task3">
                    <label for="task3">Attend standup meeting at 10 AM</label>
                </div>
            </div>
        </section>

        <!-- Quick Links -->
        <section class="quick-links">
            <h2><i class="fas fa-link"></i> Quick Links</h2>
            
            <div class="links-grid">
                <a href="#" class="quick-link">
                    <i class="fas fa-book"></i>
                    <span>Knowledge Base</span>
                </a>
                <a href="#" class="quick-link">
                    <i class="fas fa-tags"></i>
                    <span>Popular Tags</span>
                </a>
                <a href="#" class="quick-link">
                    <i class="fas fa-star"></i>
                    <span>Bookmarks</span>
                </a>
                <a href="#" class="quick-link">
                    <i class="fas fa-clock"></i>
                    <span>Recent</span>
                </a>
            </div>
        </section>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Any dashboard-specific JavaScript
    console.log("Dashboard loaded");
    
    // Task completion handler
    document.querySelectorAll('.task-item input').forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            if (this.checked) {
                this.parentElement.style.opacity = '0.6';
                // You could also send an AJAX request to update task status
            } else {
                this.parentElement.style.opacity = '1';
            }
        });
    });
</script>
{% endblock %}